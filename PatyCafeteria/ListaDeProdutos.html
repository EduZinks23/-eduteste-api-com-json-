<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pedidos</title>

<style>

/* ===== VARIÁVEIS PADRÃO (OBRIGATÓRIO) ===== */
:root{
  --bg:#ffffff;
  --card:#f9f9f9;
  --text:#000000;
  --muted:#555555;
  --button:#25D366;
  --button-text:#ffffff;
  --border:#dddddd;
  --list-item:#ffffff;
}

/* ===== GLOBAL ===== */
body{
    font-family: Arial, sans-serif;
    background:var(--bg);
    color:var(--text);
    padding:20px;
    margin:0;
}

h2{
    text-align:center;
}

/* ===== CONTAINER ===== */
.list-item{
    max-width:450px;
    margin:auto;
    background:var(--list-item);
    padding:15px;
    border-radius:10px;
    border:1px solid var(--border);
}

/* ===== ITEM ===== */
.item{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:15px;
    padding-bottom:10px;
    border-bottom:1px solid var(--border);
}

.nome{
    font-weight:bold;
}

.valor{
    color:var(--muted);
    font-size:14px;
}

.controle{
    display:flex;
    align-items:center;
    gap:10px;
}

button{
    cursor:pointer;
}

/* BOTÕES + E - */
.mais{
    width:30px;
    height:30px;
    border:none;
    border-radius:5px;
    font-size:18px;
    background:#4CAF50;
    color:var(--button-text);
}





.menos{
    width:30px;
    height:30px;
    border:none;
    border-radius:5px;
    font-size:18px;
    background:#f44336;
    color:var(--button-text);
}





/* TOTAL */
.total{
    margin-top:20px;
    font-size:18px;
    font-weight:bold;
    text-align:center;
}

/* BOTÃO ENVIAR */
.enviar{
    margin-top:15px;
    width:100%;
    padding:10px;
    background:var(--button);
    color:var(--button-text);
    font-size:16px;
    border:none;
    border-radius:8px;
}

/* RECIBO */
.recibo{
    margin-top:20px;
    background:var(--card);
    padding:10px;
    border-radius:8px;
    font-size:14px;
    border:1px solid var(--border);
}

</style>
</head>
<body>

<h2>Lista de Produtos</h2>

<div class="list-item" id="listItem">

    <!-- PRODUTOS -->
    <div class="item" data-nome="Bananinha recheada" data-valor="2.50">
        <div>
            <div class="nome">Bananinha recheada</div>
            <div class="valor">R$ 2,50</div>
        </div>
        <div class="controle">
            <button class="menos">-</button>
            <span class="quantidade">0</span>
            <button class="mais">+</button>
        </div>
    </div>

    <div class="item" data-nome="Pastel" data-valor="2.50">
        <div>
            <div class="nome">Pastel</div>
            <div class="valor">R$ 2,50</div>
        </div>
        <div class="controle">
            <button class="menos">-</button>
            <span class="quantidade">0</span>
            <button class="mais">+</button>
        </div>
    </div>

    <div class="item" data-nome="Coxinha" data-valor="3.00">
        <div>
            <div class="nome">Coxinha</div>
            <div class="valor">R$ 3,00</div>
        </div>
        <div class="controle">
            <button class="menos">-</button>
            <span class="quantidade">0</span>
            <button class="mais">+</button>
        </div>
    </div>

    <div class="item" data-nome="Refrigerante" data-valor="5.00">
        <div>
            <div class="nome">Refrigerante</div>
            <div class="valor">R$ 5,00</div>
        </div>
        <div class="controle">
            <button class="menos">-</button>
            <span class="quantidade">0</span>
            <button class="mais">+</button>
        </div>
    </div>

    <div class="total">
        Total: R$ <span id="totalValor">0,00</span>
    </div>

    <button class="enviar" onclick="enviarWhatsApp()">
        Enviar para WhatsApp
    </button>

    <div class="recibo" id="recibo">
        Nenhum item adicionado.
    </div>

</div>

<script>

/* ===== APLICAR TEMA GLOBAL ===== */
const vars = {
  bg: "--bg",
  card: "--card",
  text: "--text",
  muted: "--muted",
  button: "--button",
  buttonText: "--button-text",
  border: "--border",
  listItem: "--list-item"
};

Object.keys(vars).forEach(id=>{
  const value = localStorage.getItem(id);
  if(value){
    document.documentElement.style.setProperty(vars[id], value);  
  }
});

/* ===== SISTEMA DE PEDIDOS ===== */
let total = 0;

function atualizar(){
    document.getElementById("totalValor").innerText =
        total.toFixed(2).replace(".", ",");
    gerarRecibo();
}

document.querySelectorAll(".item").forEach(item => {

    const valor = parseFloat(item.dataset.valor);
    const quantidadeSpan = item.querySelector(".quantidade");
    const btnMais = item.querySelector(".mais");
    const btnMenos = item.querySelector(".menos");

    btnMais.addEventListener("click", () => {
        let q = parseInt(quantidadeSpan.innerText);
        q++;
        quantidadeSpan.innerText = q;
        total += valor;
        atualizar();
    });

    btnMenos.addEventListener("click", () => {
        let q = parseInt(quantidadeSpan.innerText);
        if(q > 0){
            q--;
            quantidadeSpan.innerText = q;
            total -= valor;
            atualizar();
        }
    });

});

function gerarRecibo(){
    let texto = "";
    document.querySelectorAll(".item").forEach(item => {
        let nome = item.dataset.nome;
        let valor = parseFloat(item.dataset.valor);
        let q = parseInt(item.querySelector(".quantidade").innerText);

        if(q > 0){
            texto += q + "x " + nome + " = R$ " +
                (q * valor).toFixed(2).replace(".", ",") + "<br>";
        }
    });

    if(texto === ""){
        texto = "Nenhum item adicionado.";
    } else {
        texto += "<br><strong>Total: R$ " +
            total.toFixed(2).replace(".", ",") + "</strong>";
    }

    document.getElementById("recibo").innerHTML = texto;
}

function enviarWhatsApp(){

    if(total <= 0){
        alert("Adicione pelo menos um produto!");
        return;
    }

    let mensagem = "Pedido:%0A";

    document.querySelectorAll(".item").forEach(item => {
        let nome = item.dataset.nome;
        let valor = parseFloat(item.dataset.valor);
        let q = parseInt(item.querySelector(".quantidade").innerText);

        if(q > 0){
            mensagem += q + "x " + nome + " = R$ " +
                (q * valor).toFixed(2).replace(".", ",") + "%0A";
        }
    });

    mensagem += "%0ATotal: R$ " +
        total.toFixed(2).replace(".", ",");

    let numero = "5528999407219";
    let url = "https://api.whatsapp.com/send?phone=" +
              numero + "&text=" + mensagem;

    window.open(url, "_blank");
}

</script>

</body>
</html>